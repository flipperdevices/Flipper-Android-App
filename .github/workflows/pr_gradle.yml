name: Check configuration change

on:
  pull_request:
    paths:
      - "**.gradle.kts"
      - "build-logic/**"
      - "gradle/**"
      - "gradle.properties"
  merge_group:

jobs:
  release_build:
    name: "Build release"
    runs-on: arc-runner-set
    steps:
      - uses: actions/checkout@v4.1.1
        with:
          submodules: "recursive"
      - name: Set up JDK 1.17
        uses: actions/setup-java@v4.2.1
        with:
          distribution: "temurin"
          java-version: "17"
      - name: Setup Android SDK
        uses: android-actions/setup-android@v3.2.1
      - name: Build release
        uses: gradle/actions/setup-gradle@v3.2.1
        with:
          arguments: assembleRelease bundleRelease
  debug_build:
    name: "Build debug"
    runs-on: arc-runner-set
    steps:
      - uses: actions/checkout@v4.1.1
        with:
          submodules: "recursive"
      - name: Set up JDK 1.17
        uses: actions/setup-java@v4.2.1
        with:
          distribution: "temurin"
          java-version: "17"
      - name: Setup Android SDK
        uses: android-actions/setup-android@v3.2.1
      - name: Build debug
        uses: gradle/actions/setup-gradle@v3.2.1
        with:
          arguments: assembleDebug bundleDebug
  internal_build:
    name: "Build internal"
    runs-on: arc-runner-set
    steps:
      - uses: actions/checkout@v4.1.1
        with:
          submodules: "recursive"
      - name: Set up JDK 1.17
        uses: actions/setup-java@v4.2.1
        with:
          distribution: "temurin"
          java-version: "17"
      - name: Setup Android SDK
        uses: android-actions/setup-android@v3.2.1
      - name: Build internal
        uses: gradle/actions/setup-gradle@v3.2.1
        with:
          arguments: assembleInternal bundleInternal
